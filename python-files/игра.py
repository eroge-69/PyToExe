import tkinter as tk
import random

def parse_riddles(text):
    lines = text.strip().split('\n')
    riddles = []
    i = 0
    while i < len(lines):
        if lines[i].startswith("Вопрос:"):
            question = lines[i][len("Вопрос:"):].strip()
            if i + 1 < len(lines) and lines[i + 1].startswith("Ответ:"):
                answer = lines[i + 1][len("Ответ:"):].strip()
                riddles.append((question, answer))
                i += 2
            else:
                i += 1
        else:
            i += 1
    return riddles

def start_game():
    global score, current_riddle
    score = 0
    current_riddle = 0
    random.shuffle(riddles)
    answer_entry.config(state='normal')
    submit_button.config(state='normal')
    next_button.config(state='normal')
    summary_button.config(state='normal')
    ask_riddle()
    result_label.config(text="")
    summary_label.config(text="")

def ask_riddle():
    global current_riddle
    if current_riddle < len(riddles):
        question, _ = riddles[current_riddle]
        question_label.config(text=question)
        answer_entry.delete(0, tk.END)
        result_label.config(text="")
    else:
        question_label.config(text="Все загадки закончились!")
        answer_entry.config(state='disabled')
        submit_button.config(state='disabled')
        next_button.config(state='disabled')

def check_answer():
    global score
    user_answer = answer_entry.get().strip().lower()
    correct_answer = riddles[current_riddle][1].lower()
    
    if user_answer == correct_answer:
        score += 1
        result_label.config(text="Верно!")
    else:
        result_label.config(text=f"Неверно. Правильный ответ: {riddles[current_riddle][1]}")

def next_riddle():
    global current_riddle
    current_riddle += 1
    if current_riddle < len(riddles):
        ask_riddle()
    else:
        question_label.config(text="Все загадки закончились!")
        answer_entry.config(state='disabled')
        submit_button.config(state='disabled')
        next_button.config(state='disabled')

def show_summary():
    total = len(riddles)
    summary_label.config(text=f"Итог: правильно отгадано {score} из {total} загадок")

riddles_text = """
Вопрос: Без рук, без ног, а ворота открывает.
Ответ: Ключ
Вопрос: Висит груша — нельзя съесть.
Ответ: Лампа
Вопрос: Сто одежек и все без застежек.
Ответ: Капуста
Вопрос: Летит без крыльев, плачет без глаз.
Ответ: Облако
Вопрос: Что можно увидеть с закрытыми глазами?
Ответ: Сон
Вопрос: Что в огне не горит?
Ответ: Лёд
Вопрос: Кого поднял — и он сразу стал легче?
Ответ: Перышко
Вопрос: Что растет вниз головой?
Ответ: Лук
Вопрос: Без чего дом не дом?
Ответ: Крыша
Вопрос: Зимой и летом одним цветом.
Ответ: Ёлка
Вопрос: Оно может говорить, но точно ничего не покажет.
Ответ: Радио
Вопрос: Они ведут нас вперед, хотя сами всегда ходят по кругу.
Ответ: Стрелки на часах
Вопрос: Она везде: в почве, в небе, в воздухе, в реке, в море, в овощах, во фруктах и даже в человеке.
Ответ: Вода
Вопрос: Есть три литра кефира. Как его уместить в литровую банку?
Ответ: Сварить творог
Вопрос: Что можно измерить, но нельзя увидеть или потрогать?
Ответ: Время
Вопрос: Что делится пополам только раз в четыре года?
Ответ: Год по дням
Вопрос: На ямке, ямке сто ямок с ямкой.
Ответ: Напёрсток
Вопрос: Нет ушей, а слышит. Нет рук, а пишет.
Ответ: Магнитофон
Вопрос: Бычок рогат, в руках зажат. Еду хватает, а сам голодает.
Ответ: Ухват
Вопрос: У кого есть столько глаз, сколько дней в году?
Ответ: У того кто родился 2 января
Вопрос: Что проходит большое пространство, не двигаясь с места?
Ответ: Дорога
Вопрос: Чем больше отдаю, тем больше вырастаю. Величину свою отдачей измеряю.
Ответ: Яма
Вопрос: Чёрен, голенаст. Выгибаться горазд.
Ответ: Дым
Вопрос: Узелок завязал, тебе не развязать.
Ответ: Замок
Вопрос: Сила не сила, а грязь убило.
Ответ: Мыло
Вопрос: Сделана из тряпок, а ниток не видно.
Ответ: Бумага
Вопрос: Ни глаз, ни ушей, а слепцов водит.
Ответ: Палка
Вопрос: Кто не рожден, не учён, а правдой живёт.
Ответ: Весы
Вопрос: Живёт — лежит. Умрёт — побежит.
Ответ: Снег
Вопрос: Кругом вода, а с питьём беда.
Ответ: Море
Вопрос: Костяной порог, а за ним красный говорок.
Ответ: Язык
Вопрос: Летом — кудри, а зимой — в пудре.
Ответ: Берёза
Вопрос: Что это за дорога: кто идёт, тот хромает?
Ответ: Лестница
Вопрос: Лёгонькое, маленькое, а на крышу не закинешь.
Ответ: Перо
Вопрос: Не летает, не поёт и не птица, а клюёт.
Ответ: Удочка
Вопрос: Облетел конёк целый мир в денёк.
Ответ: Ветер
Вопрос: Два брюшка, четыре ушка.
Ответ: Подушка
Вопрос: Снаружи птица, внутри человек.
Ответ: Самолёт
Вопрос: Чёрный конь скачет в огонь.
Ответ: Кочерга
Вопрос: От конца до конца протянулось полкольца.
Ответ: Радуга
Вопрос: Стоит над рекой, трясёт бородой.
Ответ: Ива
Вопрос: Без рук, без топорёнка построена избёнка.
Ответ: Гнездо
Вопрос: В деревянной колыбельке спит на веточке Емелька.
Ответ: Орех
Вопрос: Одно бросил — целую горсть взял.
Ответ: Зерно
Вопрос: Зимой всех теплей, а летом всех холодней.
Ответ: Погреб
Вопрос: Зубы имеют, а зубной боли не знают.
Ответ: Грабли
Вопрос: Крылья есть, а не летает. Ног нет, а не догонишь. Кто это?
Ответ: Рыба
Вопрос: Кланяется, кланяется. Придёт домой — растянется.
Ответ: Топор
Вопрос: Стучит, гремит, вертится, ходит весь свой век, а не человек.
Ответ: Настенные часы
Вопрос: Звенит, плюёт, взад-вперёд идёт. Что в зубы возьмёт, на две части разоймёт.
Ответ: Пила
Вопрос: Меня одну не едят, а без меня мало едят.
Ответ: Соль
Вопрос: Что общего найдёшь у дерева и книжки?
Ответ: Листы
Вопрос: Что общего найдёшь у дерева и книжки?
Ответ: День и ночь
Вопрос: Маленькое озёрко, а дна не видать.
Ответ: Чашка молока
Вопрос: Кручу, бурчу. Знать никого не хочу.
Ответ: Вьюга
Вопрос: Мал пузырёк, как звезда огонёк.
Ответ: Лампочка
Вопрос: Сочная и золотая меж зелени мелькает, а во рту так и тает.
Ответ: Груша
Вопрос: Кричит горлан через море-океан — получает ответ через целый свет. 
Ответ: Радио
Вопрос: Изогнут, словно хвост петуха, зазубрен, словно зубы щуки.
Ответ: Серп
Вопрос: Дарья с Марьей видятся, да не сходятся.
Ответ: Пол и потолок
Вопрос: Что за зверь: в зиму ест, а летом спит; тело тёплое, а крови нет; сядешь на него, а с места тебя не свезёт?
Ответ: Печка
Вопрос: Был ребёнок — не знал пелёнок. Стал стариком — сто пелёнок на нём.
Ответ: Кочан капусты
Вопрос: Две головы, шесть ног. А едет на четырёх.
Ответ: Всадник на коне
Вопрос: У чего нельзя найти ни конца, ни начала?
Ответ: Круг
Вопрос: В кружке — точка, в точке — ночка; что ни встретит, всё заметит.
Ответ: Зрачок
Вопрос: Без крыльев летает, без зубов кусает. Меньше ягоды, сильней быка.
Ответ: Пуля
Вопрос: Жёлто, а не золото. Тает, а не снег.
Ответ: Масло
Вопрос: Есть всегда у кораблей и, конечно, у людей.
Ответ: Нос
Вопрос: Вот дом из жести, а жильцы в нём — вести.
Ответ: Почтовый ящик
Вопрос: Рассыпался горох на четыреста дорог. Солнце взойдёт — всё соберёт.
Ответ: Град
Вопрос: Зимой в доме мёрзнет, а на улице нет.
Ответ: Оконное стекло
Вопрос: Без тела живёт, без языка говорит, никто его не видит, а всякий слышит.
Ответ: Эхо
Вопрос: Не связана — как дорожка, а связана — так одёжка.
Ответ: Нитка
Вопрос: Бежит — шумит, а зимой молчит.
Ответ: Река
Вопрос: Синее одеяло высоко бежало, книзу опустилось — в воду обратилось.
Ответ: Туча
Вопрос: Вечером прилетит, всю ночь пролежит, а утром опять улетит.
Ответ: Роса
Вопрос: Бежит, бежит — не выбежит, течёт, течёт — не вытечет.
Ответ: Река
Вопрос: Из избы — пляшут, в избу — плачут.
Ответ: Вёдра
Вопрос: В воде купался, а сух остался.
Ответ: Гусь
Вопрос: Под стеклом сижу, в одну сторону гляжу.
Ответ: Портрет
Вопрос: Дам есть — плачет и ворчит. Ничего не дам — она молчит.
Ответ: Сковорода
Вопрос: На чужой спине едет, а на своей груз везёт.
Ответ: Седло
Вопрос: Горит столб, а углей нет.
Ответ: Свеча
Вопрос: В углу сито, не руками вито.
Ответ: Паутина
Вопрос: На раскрашенных страницах много праздников хранится.
Ответ: Календарь
"""

riddles = parse_riddles(riddles_text)

root = tk.Tk()
root.title("Игра в загадки")
root.configure(bg='lightgreen')
question_label = tk.Label(root, text="", wraplength=300, bg='lightgreen')
question_label.pack(pady=20)

answer_entry = tk.Entry(root, bg='white')
answer_entry.pack(pady=10)

submit_button = tk.Button(root, text="Ответить", command=check_answer, bg='lightgreen')
submit_button.pack(pady=10)

next_button = tk.Button(root, text="Дальше", command=next_riddle, bg='lightgreen')
next_button.pack(pady=10)

summary_button = tk.Button(root, text="Подвести итог", command=show_summary, bg='lightgreen')
summary_button.pack(pady=10)

result_label = tk.Label(root, text="", bg='lightgreen')
result_label.pack(pady=10)

summary_label = tk.Label(root, text="", font=('Arial', 12, 'bold'), bg='lightgreen')
summary_label.pack(pady=10)

start_button = tk.Button(root, text="Начать игру", command=start_game, bg='lightgreen')
start_button.pack(pady=10)

root.mainloop()
