import customtkinter as ctk
import subprocess
import os

ctk.set_appearance_mode("System")  # Default to system setting
ctk.set_default_color_theme("blue")

app = ctk.CTk()
app.title("MalwareTools.exe - Created by Bryce Kick")
app.geometry("500x400")

# === Functions ===
def show_about():
    ctk.CTkMessagebox(title="About", message="MalwareTools.exe\nCreated by Bryce Kick")

def re_enable_tools():
    try:
        # Re-enable common Windows tools (Regedit, Task Manager, CMD)
        os.system("REG delete HKCU\\Software\\Microsoft\\Windows\\CurrentVersion\\Policies\\System /v DisableTaskMgr /f")
        os.system("REG delete HKCU\\Software\\Microsoft\\Windows\\CurrentVersion\\Policies\\System /v DisableRegistryTools /f")
        os.system("REG delete HKCU\\Software\\Policies\\Microsoft\\Windows Defender /f")
    except Exception as e:
        print(f"Error: {e}")

def run_scan():
    # Placeholder: Scan %TEMP% for .exe or other suspicious files
    temp_files = os.listdir(os.getenv("TEMP"))
    print("Scanning TEMP folder...")
    for file in temp_files:
        if file.endswith(".exe"):
            print(f"Suspicious file: {file}")

def fix_mbr():
    subprocess.run("start cmd /k bootrec /fixmbr", shell=True)

def toggle_theme():
    mode = ctk.get_appearance_mode()
    ctk.set_appearance_mode("Dark" if mode == "Light" else "Light")

# === Buttons ===
ctk.CTkButton(app, text="1. About", command=show_about).pack(pady=10)
ctk.CTkButton(app, text="2. Re-enable Disabled Stuff", command=re_enable_tools).pack(pady=10)
ctk.CTkButton(app, text="3. Auto Scan", command=run_scan).pack(pady=10)
ctk.CTkButton(app, text="4. Fix MBR", command=fix_mbr).pack(pady=10)
ctk.CTkButton(app, text="5. Toggle Light/Dark Mode", command=toggle_theme).pack(pady=10)

app.mainloop()
