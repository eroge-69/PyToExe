import telnetlib
import time

def перезагрузить_роутер(ip_адрес, имя_пользователя, пароль):
    """
    Перезагружает роутер по Telnet.

    Аргументы:
        ip_адрес: IP-адрес роутера.
        имя_пользователя: Имя пользователя для подключения к роутеру.
        пароль: Пароль для подключения к роутеру.
    """

    try:
        # Устанавливаем соединение Telnet
        tn = telnetlib.Telnet(ip_адрес)

        # Ждем, пока появится приглашение для ввода имени пользователя
        tn.read_until(b"login: ", timeout=10)

        # Отправляем имя пользователя и переходим на следующую строку
        tn.write(имя_пользователя.encode('ascii') + b"\n")

        # Ждем, пока появится приглашение для ввода пароля
        tn.read_until(b"Password: ", timeout=10)

        # Отправляем пароль и переходим на следующую строку
        tn.write(пароль.encode('ascii') + b"\n")

        # Ждем, пока появится приглашение командной строки
        tn.read_until(b">", timeout=10)

        # Отправляем команду перезагрузки (может отличаться для разных роутеров)
        # В данном примере предполагается команда "reboot"
        tn.write(b"reboot\n")

        # Ждем, пока роутер перезагрузится (очень важно!)
        # Это время может значительно меняться в зависимости от роутера.
        time.sleep(60)  # Ждем 60 секунд.  Увеличьте, если роутер перезагружается дольше.

        print("Роутер перезагружен.")

    except Exception as e:
        print(f"Ошибка: {e}")
    finally:
        try:
            tn.close()  # Закрываем соединение Telnet
        except:
            pass

# Пример использования:
if __name__ == "__main__":
    ip_адрес_роутера = "192.168.1.1"  # Замените на IP-адрес вашего роутера
    имя_пользователя = "admin"  # Замените на имя пользователя вашего роутера
    пароль = "admin"  # Замените на пароль вашего роутера
